<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chatbot Inclusivo</title>
    <style>
        body {
            .chat-button-open {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background-color: #007bff; /* Cor azul para o bot√£o inicial */
            color: white;
            border: none;
            border-radius: 8px;
            padding: 15px 20px;
            cursor: pointer;
            font-size: 16px;
            z-index: 1000; /* Garante que o bot√£o fique acima do conte√∫do */
        }
        .chat-button-open:hover {
            background-color: #0056b3;
        }
        .chat-container {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background-color: white;
            border: 1px solid #ccc;
            border-radius: 8px;
            width: 300px;
            box-shadow: 0px 4px 8px rgba(0, 0, 0, 0.1);
            z-index: 1001; /* Garante que o chat fique acima do bot√£o */
        }
        .chat-container.hidden {
            display: none;
        }
        .chat-header {
            background-color: #f0f0f0;
            padding: 10px;
            border-bottom: 1px solid #ccc;
            border-top-left-radius: 8px;
            border-top-right-radius: 8px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .chat-header h3 {
            margin: 0;
            font-size: 18px;
        }
        .chat-header button {
            background: none;
            border: none;
            font-size: 20px;
            cursor: pointer;
            padding: 0;
        }
        .chat-box {
            max-height: 300px; /* Reduzi a altura para caber melhor */
            overflow-y: auto;
            padding: 10px;
            background-color: #f9f9f9;
            border-bottom: 1px solid #ccc;
        }
        .chat-input-area {
            display: flex;
            padding: 10px;
        }
        .chat-input {
            flex-grow: 1;
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 8px 0 0 8px;
            box-sizing: border-box;
            border-right: none;
        }
        .chat-submit-button {
            background-color: #4CAF50;
            color: white;
            border: none;
            border-radius: 0 8px 8px 0;
            padding: 10px 15px;
            cursor: pointer;
        }
        .chat-submit-button:hover {
            background-color: #45a049;
        }
        .user-message {
            text-align: right;
            margin: 5px 0;
            padding: 8px;
            background-color: #e0f7fa;
            border-radius: 8px;
            word-break: break-word;
        }
        .bot-message {
            text-align: left;
            margin: 5px 0;
            padding: 8px;
            background-color: #f0f0f0;
            border-radius: 8px;
            word-break: break-word;
        }

            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f4f4f9;
        }
        .chat-container {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background-color: white;
            border: 1px solid #ccc;
            border-radius: 8px;
            width: 300px;
            box-shadow: 0px 4px 8px rgba(0, 0, 0, 0.1);
        }
        .chat-box {
            max-height: 400px;
            overflow-y: auto;
            padding: 10px;
            background-color: #f9f9f9;
            border-bottom: 1px solid #ccc;
        }
        .chat-input {
            width: 100%;
            padding: 10px;
            border: none;
            border-radius: 8px;
            box-sizing: border-box;
        }
        .chat-button {
            padding: 10px;
            background-color: #4CAF50;
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            width: 100%;
        }
        .chat-button:hover {
            background-color: #45a049;
        }
        .user-message {
            text-align: right;
            margin: 5px 0;
        }
        .bot-message {
            text-align: left;
            margin: 5px 0;
        }
    </style>
</head>
<body>
    <button class="chat-button-open" id="open-chat">Abrir Chat</button>
    <div class="chat-container hidden" id="chat-container">
        <div class="chat-header">
            <h3>Chatbot Inclusivo</h3>
            <button onclick="toggleChat()">√ó</button>
        </div>
        <div class="chat-box" id="chat-box"></div>
        <div class="chat-input-area">
            <input type="text" id="user-input" class="chat-input" placeholder="Digite sua mensagem..." onkeydown="if(event.key === 'Enter'){sendMessage();}">
            <button class="chat-submit-button" onclick="sendMessage()">Enviar</button>
        </div>
    </div>
    
    <script>

const chatContainer = document.getElementById("chat-container");
        const openChatButton = document.getElementById("open-chat");
        const chatBox = document.getElementById("chat-box");
        const userInputElement = document.getElementById("user-input");

        let lastBotMessage = ""; // Vari√°vel para rastrear a √∫ltima mensagem do bot

        function toggleChat() {
            chatContainer.classList.toggle("hidden");
            openChatButton.style.display = chatContainer.classList.contains("hidden") ? "block" : "none";
            if (!chatContainer.classList.contains("hidden") && chatBox.children.length === 0) {
                // Envia a mensagem de boas-vindas apenas quando o chat √© aberto pela primeira vez
                const initialMessage = "Ol√°! Sou um assistente inclusivo. Voc√™ pode me perguntar sobre: capacita√ß√£o, habilidades sociais, apoio emocional, acessibilidade, empresas inclusivas, direitos das pessoas com defici√™ncia, tecnologia assistiva ou Libras.";
                displayMessage(initialMessage, "bot");
                lastBotMessage = initialMessage;
            }
        }

        openChatButton.addEventListener("click", toggleChat);

        function getBotResponse(userInput) {
            // ... (seu c√≥digo da fun√ß√£o getBotResponse existente) ...
        }

        function displayMessage(message, sender) {
            const chatBox = document.getElementById("chat-box");
            const messageDiv = document.createElement("div");
            messageDiv.classList.add(sender === "user" ? "user-message" : "bot-message");
            messageDiv.innerHTML = message.replace(/\n/g, '<br>'); // Usar innerHTML para renderizar <br>
            chatBox.appendChild(messageDiv);
            chatBox.scrollTop = chatBox.scrollHeight;
        }

        function sendMessage() {
            const userInputElement = document.getElementById("user-input");
            const userInput = userInputElement.value;
            if (userInput.trim() === "") return;

            displayMessage(userInput, "user");
            userInputElement.value = "";

            const botResponse = getBotResponse(userInput.toLowerCase());
            displayMessage(botResponse, "bot");
            lastBotMessage = botResponse; // Atualiza a √∫ltima mensagem do bot
        }

        function getLastBotMessage() {
            const chatBox = document.getElementById("chat-box");
            const botMessages = chatBox.querySelectorAll(".bot-message");
            if (botMessages.length > 0) {
                return botMessages[botMessages.length - 1].textContent;
            }
            return "";
        }

        // Remove a mensagem de boas-vindas do window.onload para que ela apare√ßa s√≥ quando o chat for aberto
        // window.onload = function() {
        //     const initialMessage = "Ol√°! Sou um assistente inclusivo. Voc√™ pode me perguntar sobre: capacita√ß√£o, habilidades sociais, apoio emocional, acessibilidade, empresas inclusivas, direitos das pessoas com defici√™ncia, tecnologia assistiva ou Libras.";
        //     displayMessage(initialMessage, "bot");
        //     lastBotMessage = initialMessage;
        // };
        
        const database = {
            "capacita√ß√£o": [
                {
                    "initial": "A capacita√ß√£o profissional √© uma das melhores formas de garantir uma inser√ß√£o digna no mercado de trabalho. Embora n√£o ofere√ßamos cursos diretamente, podemos indicar cursos gratuitos em plataformas como Coursera, edX e Udemy. Voc√™ gostaria de saber mais sobre algum tema espec√≠fico ou buscar cursos nessas plataformas?",
                    "followUp": "Voc√™ pode explorar cursos gratuitos nessas plataformas e tamb√©m acessar nossa p√°gina de capacita√ß√£o para conferir dicas, recursos e links √∫teis para o seu desenvolvimento profissional."
                }
            ],
            "habilidades sociais": [
                {
                    "initial": "As habilidades sociais s√£o essenciais para intera√ß√µes eficazes no ambiente profissional e pessoal. Existem muitos recursos dispon√≠veis online para o desenvolvimento dessas habilidades. Voc√™ gostaria de mais informa√ß√µes sobre como melhorar suas habilidades de comunica√ß√£o ou trabalho em equipe?",
                    "followUp": "Recomendo procurar cursos e tutoriais sobre comunica√ß√£o eficaz, resolu√ß√£o de conflitos e trabalho em equipe. Posso te ajudar a encontrar esses recursos."
                }
            ],
            "apoio emocional": [
                {
                    "initial": "O apoio emocional √© essencial. Existem grupos de apoio online para pessoas com defici√™ncia. Quer que eu te ajude a encontrar um?",
                    "followUp": "Algumas plataformas √∫teis incluem: Psicologia Viva, Zenklub e Vittude e tamb√©m acesse a nossa p√°gina de apoio emocional para conferir dicas, recursos e links √∫teis."
                }
            ],
            "acessibilidade": [
                {
                    "initial": "A acessibilidade garante acesso igualit√°rio a espa√ßos e servi√ßos. Posso te ajudar a verificar se um local ou produto √© acess√≠vel?",
                    "followUp": "Procure rampas, elevadores, sinaliza√ß√£o em braile, leitores de tela e acessos visuais e t√°teis. Quer ajuda para avaliar um lugar espec√≠fico?"
                }
            ],
            "empresas inclusivas": [
                {
                    "initial": "Empresas inclusivas promovem um ambiente acess√≠vel e respeitoso. Podemos prosseguir?",
                    "followUp": "Empresas inclusivas integram diversas pessoas em todos os n√≠veis, indo al√©m de cotas. Isso traz inova√ß√£o, melhora a reputa√ß√£o, atrai talentos, aumenta produtividade, compreende melhor o mercado e reduz conflitos. Construir essa cultura exige comprometimento da lideran√ßa, pol√≠ticas inclusivas, acessibilidade, treinamento, comunica√ß√£o aberta e monitoramento constante. Ser inclusivo n√£o √© s√≥ √©tico, mas torna a empresa mais inovadora, competitiva e socialmente respons√°vel."
                },
                {
                    "initial": "Algumas empresas s√£o exemplos de boas pr√°ticas em inclus√£o e acessibilidade digital. Gostaria de conhecer algumas?",
                    "followUp": "Empresas como Natura, Magazine Luiza e Johnson & Johnson implementam pol√≠ticas de inclus√£o e acessibilidade digital."
                }
            ],
            "direitos das pessoas com defici√™ncia": [
                {
                    "initial": "Quais direitos das pessoas com defici√™ncia voc√™ gostaria de conhecer: sa√∫de, educa√ß√£o, trabalho, transporte ou outros?",
                    "followUp": "No Brasil, a Constitui√ß√£o Federal e o Estatuto da Pessoa com Defici√™ncia (Lei n¬∫ 13.146/2015) asseguram direitos para garantir igualdade e plena participa√ß√£o na sociedade. Os principais direitos incluem acessibilidade (ambientes, servi√ßos, informa√ß√£o), educa√ß√£o inclusiva com adapta√ß√µes, sa√∫de adequada com tecnologia assistiva, igualdade de oportunidades no trabalho com adapta√ß√µes, direitos previdenci√°rios, participa√ß√£o em cultura, esporte e lazer acess√≠veis, e acesso √† justi√ßa com recursos de acessibilidade. A lei tamb√©m estabelece a prioridade na efetiva√ß√£o de direitos √† vida, sa√∫de, sexualidade, alimenta√ß√£o, habita√ß√£o, educa√ß√£o, trabalho, previd√™ncia, cultura, esporte, lazer, acessibilidade, mobilidade, moradia, conviv√™ncia familiar e prote√ß√£o contra neglig√™ncia, discrimina√ß√£o, explora√ß√£o, viol√™ncia e opress√£o, visando promover inclus√£o, dignidade e autonomia."
                }
            ],
            "tecnologia assistiva": [
                {
                    "initial": "Tecnologia assistiva promove independ√™ncia e inclus√£o. Tem interesse em algum tipo espec√≠fico como leitores de tela ou pr√≥teses?",
                    "followUp": "Leitores de tela como NVDA, JAWS e VoiceOver s√£o exemplos."
                }
            ],
            "libras": [
                {
                    "initial": "Libras √© a L√≠ngua Brasileira de Sinais, essencial para a comunica√ß√£o de pessoas surdas no Brasil. Voc√™ gostaria de saber mais sobre o aprendizado de Libras, recursos dispon√≠veis ou sua import√¢ncia?",
                    "followUp": "Existem diversos cursos online e presenciais para aprender Libras. Al√©m disso, aplicativos e dicion√°rios online podem ser √∫teis. Posso te indicar alguns recursos?"
                },
                {
                    "initial": "A acessibilidade em Libras √© um direito! Quer saber mais sobre a legisla√ß√£o e a import√¢ncia da presen√ßa de int√©rpretes?",
                    "followUp": "A Lei n¬∫ 10.436/2002 reconhece a Libras como meio legal de comunica√ß√£o e express√£o. A presen√ßa de int√©rpretes √© fundamental em diversos contextos."
                },
                {
                    "initial": "Quer saber mais sobre cursos online ou presenciais de Libras?",
                    "followUp": "Plataformas como a Kultivi e o Senac oferecem cursos de Libras. Universidades e associa√ß√µes de surdos tamb√©m costumam ter op√ß√µes."
                },
                {
                    "initial": "Gostaria de conhecer aplicativos e dicion√°rios online de Libras?",
                    "followUp": "Alguns aplicativos √∫teis s√£o Hand Talk e SignAR. Dicion√°rios online como o da LIBRAS.com.br podem ser muito √∫teis."
                },
                {
                    "initial": "Tem interesse em saber mais sobre a legisla√ß√£o que garante a acessibilidade em Libras?",
                    "followUp": "A Lei n¬∫ 10.436/2002 e o Decreto n¬∫ 5.626/2005 s√£o importantes marcos legais que reconhecem e regulamentam a Libras."
                }
            ]
        };

        const palavrasChave = {
            "capacita√ß√£o": ["curso", "forma√ß√£o", "aprender", "capacita√ß√£o", "mentoria"],
            "habilidades sociais": ["habilidades sociais", "comunica√ß√£o", "intera√ß√£o", "rede de contatos", "trabalho em equipe"],
            "apoio emocional": ["emocional", "psicol√≥gico", "apoio", "sentimento", "terapia"],
            "acessibilidade": ["acess√≠vel", "cadeira de rodas", "braile", "rampa", "sinaliza√ß√£o"],
            "empresas inclusivas": ["empresa", "colaborador", "inclus√£o", "diversidade", "ambiente inclusivo"],
            "direitos das pessoas com defici√™ncia": ["direito", "lei", "inclus√£o", "estatuto", "garantia"],
            "tecnologia assistiva": ["tecnologia", "leitor de tela", "pr√≥tese", "comunica√ß√£o alternativa", "√≥rtese"],
            "libras": ["libras", "l√≠ngua de sinais", "surdos", "interpreta√ß√£o", "comunica√ß√£o com surdos", "aprender libras", "curso de libras", "dicion√°rio de libras", "acessibilidade em libras", "int√©rprete de libras", "legisla√ß√£o libras"]
        };

        function getBotResponse(userInput, lastBotMessage) {
            // Lista de direitos espec√≠ficos
            const direitosEspecificos = ["sa√∫de", "educa√ß√£o", "trabalho", "transporte"];

            // Verifica se a √∫ltima mensagem do bot foi sobre direitos espec√≠ficos
            if (
                lastBotMessage &&
                lastBotMessage.includes("Quais direitos das pessoas com defici√™ncia voc√™ gostaria de conhecer: sa√∫de, educa√ß√£o, trabalho, transporte ou outros?")
            ) {
                // Verifica se a resposta do usu√°rio corresponde a um direito espec√≠fico
                for (const direito of direitosEspecificos) {
                    if (userInput.includes(direito)) {
                        return `O direito √† ${direito} est√° previsto na Lei Brasileira de Inclus√£o (Lei n¬∫ 13.146/2015).`;
                    }
                }
                if (userInput.toLowerCase().includes("outros")) {
                    return `Outros direitos importantes incluem a acessibilidade, a igualdade de oportunidades, a participa√ß√£o na vida pol√≠tica e p√∫blica, entre outros, todos assegurados pelo Estatuto da Pessoa com Defici√™ncia.`;
                }
            }

            // Verifica se a √∫ltima mensagem do bot foi sobre exemplos de tecnologia assistiva
            if (
                lastBotMessage &&
                lastBotMessage.includes("Leitores de tela como NVDA, JAWS e VoiceOver s√£o exemplos.") &&
                userInput.toLowerCase().includes("sim")
            ) {
                return "√ìtimo! Para leitores de tela, voc√™ pode pesquisar por NVDA (gratuito), JAWS (pago) e VoiceOver (nativo em dispositivos Apple). Existem muitos tutoriais online para come√ßar a us√°-los.";
            }

            // Verifica se a √∫ltima mensagem do bot foi sobre ajudar com acessibilidade (primeira resposta)
            if (
                lastBotMessage &&
                lastBotMessage.includes("Posso te ajudar a verificar se um local ou produto √© acess√≠vel?") &&
                userInput.toLowerCase().includes("sim")
            ) {
                return "Para avaliarmos a acessibilidade, me diga qual local ou produto gostaria de verificar!";
            }
            if (
                lastBotMessage &&
                lastBotMessage.includes("Posso te ajudar a verificar se um local ou produto √© acess√≠vel?") &&
                userInput.toLowerCase().includes("me ajude")
            ) {
                return "Certo, diga qual local ou produto voc√™ quer verificar a acessibilidade.";
            }

            // Verifica se a √∫ltima mensagem do bot pediu um local/produto para verificar a acessibilidade
            if (
                lastBotMessage &&
                lastBotMessage.includes("Para avaliarmos a acessibilidade, me diga qual local ou produto gostaria de verificar!") &&
                userInput.trim() !== ""
            ) {
                const localProduto = userInput.toLowerCase();
                return `Para avaliar a acessibilidade de "${userInput}", observe o seguinte:\n\n` +
                       `**Edifica√ß√µes Acess√≠veis:**\n` +
                       `- Rampas e elevadores.\n` +
                       `- Corrim√£os e banheiros adaptados.\n` +
                       `- Sinaliza√ß√£o t√°til e visual.\n` +
                       `- Espa√ßos de circula√ß√£o adequados.\n\n` +
                       `**Vias P√∫blicas Acess√≠veis:**\n` +
                       `- Piso t√°til e faixas de pedestres seguras.\n` +
                       `- Sem√°foros sonoros e rebaixamento de guias.\n` +
                       `- Mobili√°rio urbano acess√≠vel.\n\n` +
                       `**Transporte P√∫blico Acess√≠vel:**\n` +
                       `- Elevadores ou rampas de acesso em ve√≠culos.\n` +
                       `- Espa√ßos reservados e sinaliza√ß√£o adequada.\n` +
                       `- Esta√ß√µes e terminais acess√≠veis.\n\n` +
                       `**Lazer e Recrea√ß√£o Acess√≠veis:**\n` +
                       `- Caminhos acess√≠veis em parques.\n` +
                       `- Brinquedos adaptados e √°reas de descanso adequadas.\n` +
                       `- Sanit√°rios acess√≠veis.\n\n` +
                       `**Com√©rcio e Servi√ßos Acess√≠veis:**\n` +
                       `- Acesso facilitado a lojas, restaurantes, cinemas, etc.\n\n` +
                       `**Educa√ß√£o Acess√≠vel:**\n` +
                       `- Acessibilidade f√≠sica nas escolas e universidades.\n` +
                       `- Acessibilidade pedag√≥gica (materiais e m√©todos adaptados).\n\n` +
                       `**Sa√∫de Acess√≠vel:**\n` +
                       `- Acesso facilitado a hospitais e cl√≠nicas.\n` +
                       `- Equipamentos e comunica√ß√£o acess√≠veis.`;
            }
            if (
                lastBotMessage &&
                lastBotMessage.includes("Certo, diga qual local ou produto voc√™ quer verificar a acessibilidade.") &&
                userInput.trim() !== ""
            ) {
                return `Voc√™ quer verificar a acessibilidade de "${userInput}". √â importante observar se h√° rampas, corrim√£os, elevadores, informa√ß√µes em braile e outras adapta√ß√µes para garantir a inclus√£o.`;
            }

            // Resposta de confirma√ß√£o gen√©rica
            if (userInput.toLowerCase().includes("sim") && lastBotMessage) {
                for (const key in database) {
                    for (const item of database[key]) {
                        if (item.initial && item.initial.toLowerCase() === lastBotMessage.toLowerCase()) {
                            // Verifica se a √∫ltima mensagem foi sobre apoio emocional
                            if (key === "apoio emocional") {
                                // Abre os sites recomendados em novas abas
                                window.open("https://www.psicologiaviva.com.br/", "_blank");
                                return "Abri para voc√™ o site recomendado para apoio emocional. Espero que seja √∫til!";
                            }
                            return item.followUp;
                        }
                    }
                }
            }

            // Tenta identificar tema por palavra-chave direta
            for (const key in database) {
                if (userInput.includes(key)) {
                    const respostas = database[key];
                    const respostaAleatoria = respostas[Math.floor(Math.random() * respostas.length)];
                    return respostaAleatoria.initial;
                }
            }

            // Verifica por palavras-chave flex√≠veis
            for (const tema in palavrasChave) {
                const lista = palavrasChave[tema];
                if (lista.some(palavra => userInput.includes(palavra))) {
                    const respostas = database[tema];
                    const respostaAleatoria = respostas[Math.floor(Math.random() * respostas.length)];
                    return respostaAleatoria.initial;
                }
            }

            // Resposta de despedida para respostas como "Ok", "Obrigado" e similares
            if (
                userInput.includes("ok") ||
                userInput.includes("obrigado") ||
                userInput.includes("obrigada") ||
                userInput.includes("tchau") ||
                userInput.includes("obg")
            ) {
                return "Fico feliz em ter ajudado! Se precisar de mais alguma coisa, √© s√≥ chamar. At√© logo! üòä";
            }

            return "Desculpe, n√£o consegui identificar exatamente o que voc√™ perguntou. Por favor, seja mais espec√≠fico.";
        }

        function displayMessage(message, sender) {
            const chatBox = document.getElementById("chat-box");
            const messageDiv = document.createElement("div");
            messageDiv.classList.add(sender === "user" ? "user-message" : "bot-message");
            messageDiv.innerHTML = message.replace(/\n/g, '<br>'); // Usar innerHTML para renderizar <br>
            chatBox.appendChild(messageDiv);
            chatBox.scrollTop = chatBox.scrollHeight;
        }

        function sendMessage() {
            const userInputElement = document.getElementById("user-input");
            const userInput = userInputElement.value;
            if (userInput.trim() === "") return;

            displayMessage(userInput, "user");
            userInputElement.value = "";

            const lastBotMessage = getLastBotMessage();
            const botResponse = getBotResponse(userInput.toLowerCase(), lastBotMessage);
            displayMessage(botResponse, "bot");
        }

        function getLastBotMessage() {
            const chatBox = document.getElementById("chat-box");
            const botMessages = chatBox.querySelectorAll(".bot-message");
            if (botMessages.length > 0) {
                return botMessages[botMessages.length - 1].textContent;
            }
            return "";
        }

        // Mensagem de boas-vindas
        window.onload = function() {
            const initialMessage = "Ol√°! Sou um assistente inclusivo. Voc√™ pode me perguntar sobre: capacita√ß√£o, habilidades sociais, apoio emocional, acessibilidade, empresas inclusivas, direitos das pessoas com defici√™ncia, tecnologia assistiva ou Libras.";
            displayMessage(initialMessage, "bot");
        };

    </script>
</body>
</html>